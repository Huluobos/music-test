webpackJsonp([11],{qQmc:function(t,a){},wlJj:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"Djxq1",components:{headerDom:e("Cz8s").a},data:function(){return{loading:!0,tableData:[],djData:{},djCount:333,showDjList:[],flag:!1}},methods:{getDjDetail:function(){var t=this,a=this.$route.params.id;this.$axios.get("djDetail",{rid:a}).then(function(a){console.log(a),200===a.code&&(t.djData=a.djRadio)})},getDjProgram:function(){var t=this,a=this,e=this.$route.params.id;this.$axios.get("djProgram",{rid:e,limit:9900}).then(function(e){t.djCount=e.count,t.tableData=e.programs,a.handleCurrentChange(1);for(var i=0;i<t.tableData.length;i++)t.tableData[i].time=new Date(t.tableData[i].createTime).toLocaleString().replace(/:\d{1,2}$/," ");t.loading=!1})},handleCurrentChange:function(t){var a=10*t,e=10*t-10;this.showDjList=this.tableData.slice(e,a)},getMusicDetail:function(t){},playDj:function(t,a){var e=this;this.$axios.get("djSong",{id:a}).then(function(a){console.log(a.data);a.data[0];200===a.code&&e.$notify({duration:0,title:t,position:"bottom-right",dangerouslyUseHTMLString:!0,message:'<audio controls="controls" loop="loop" autoplay="autoplay" src="'+a.data[0].url+'"></audio>'})})},subDj:function(){var t=this,a=this.$route.params.id;this.djData.subed?this.$confirm("是否取消订阅","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.get("djSubYn",{rid:a,t:0}).then(function(a){a.code,t.$message({type:"success",message:"取消订阅成功!"}),t.getDjDetail()})}).catch(function(){t.$message({type:"info",message:"已取消"})}):this.$confirm("是否订阅","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.get("djSubYn",{rid:a,t:1}).then(function(a){a.code,t.$message({type:"success",message:"订阅成功!"}),t.getDjDetail()})}).catch(function(){t.$message({type:"info",message:"已取消"})})}},mounted:function(){this.getDjDetail(),this.getDjProgram()}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("headerDom"),t._v(" "),e("div",{staticClass:"wraper"},[e("div",{staticClass:"wraper-1"},[e("div",{staticClass:"top"},[e("div",{staticClass:"img-left fl"},[e("img",{attrs:{src:t.djData.picUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"text-right clearfix"},[e("i"),t._v(" "),e("p",{staticClass:"p-top"},[t._v(t._s(t.djData.name))]),t._v(" "),e("p",{staticClass:"p-footer"},[t._v(t._s(t.djData.rcmdText))]),t._v(" "),e("p",{staticClass:"p-mid"},[t._v("详情:"+t._s(t.djData.desc))]),t._v(" "),e("div",{staticClass:"btn"},[e("span",[t._v("是否订阅：")]),e("el-button",{class:t.djData.subed?"on":"",attrs:{type:"text"},on:{click:t.subDj}},[t._v(t._s(t.djData.subed?"已订阅":"订阅"))])],1)])]),t._v(" "),e("h2",{staticClass:"act"},[t._v("节目列表 "),e("span",[t._v("共"+t._s(t.djCount)+"期")])]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.showDjList,stripe:""}},[e("el-table-column",{attrs:{prop:"serialNum",label:"期号",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"节目名",width:"320","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"time",label:"日期",width:"240"}}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.getMusicDetail(a.row.id)}}},[t._v("查看")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.playDj(a.row.name,a.row.mainTrackId)}}},[t._v("播放")])]}}])})],1),t._v(" "),e("div",{staticClass:"paged"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.djCount,"page-size":10},on:{"current-change":t.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var s=e("VU/8")(i,n,!1,function(t){e("qQmc")},"data-v-2e8c66be",null);a.default=s.exports}});
//# sourceMappingURL=11.74e74bc94a7f1215f8c4.js.map