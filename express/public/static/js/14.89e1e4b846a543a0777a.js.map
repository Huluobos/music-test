{"version":3,"sources":["webpack:///src/view/preson/index.vue","webpack:///./src/view/preson/index.vue?2ad3","webpack:///./src/view/preson/index.vue"],"names":["preson","name","inject","data","subInfo","loveMusicListDetail","loading","multipleSelection","components","headerDom","header","methods","getUserDel","_this","this","$axios","get","then","res","console","log","code","toggleSelection","rows","_this2","forEach","row","$refs","multipleTable","toggleRowSelection","clearSelection","handleSelectionChange","val","getMusicList","that","userId","localStorage","getItem","uid","result","playlist","i","length","time","Date","createTime","toLocaleString","replace","catch","error","subYn","id","_this3","t","$message","message","type","reload","subYnAll","_this4","flag","ul","push","$confirm","confirmButtonText","cancelButtonText","j","computed","extends_default","Object","vuex_esm","mounted","view_preson","render","_vm","_h","$createElement","_c","_self","_v","staticClass","attrs","src","userInfo","avatarUrl","alt","_s","nickname","artistCount","djRadioCount","subPlaylistCount","mvCount","ref","staticStyle","width","tooltip-effect","on","selection-change","prop","label","sortable","show-overflow-tooltip","align","scopedSlots","_u","key","fn","scope","size","click","$event","margin-top","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.89e1e4b846a543a0777a.js","sourcesContent":["<template>\n    <div>\n      <headerDom></headerDom>\n      <div class=\"wraper\">\n        <div class=\"box\">\n          <div class=\"img fl\">\n            <img :src=\"userInfo.avatarUrl\" alt=\"\">\n          </div>\n          <div class=\"centent clearfix\">\n            <p class=\"title\">用户: <span>{{userInfo.nickname}}</span>您好</p>\n            <div class=\"detile\">\n              <h1>截止目前的您的收藏结果如下：</h1>\n              <p>歌手共关注 <span>{{subInfo.artistCount}}</span>位</p>\n              <p>电台共订阅 <span>{{subInfo.djRadioCount}}</span>个</p>\n              <p>歌单共收藏 <span>{{subInfo.subPlaylistCount}}</span>个</p>\n              <p>MV共收藏 <span>{{subInfo.mvCount}}</span>部</p>\n            </div>\n          </div>\n          <el-table\n            ref=\"multipleTable\"\n            :data=\"loveMusicListDetail\"\n            tooltip-effect=\"dark\"\n            style=\"width: 100%\"\n            @selection-change=\"handleSelectionChange\">\n            <el-table-column\n              type=\"selection\"\n              width=\"55\">\n            </el-table-column>\n            <el-table-column\n              prop=\"name\"\n              label=\"歌单名称\"\n              width=\"250\">\n            </el-table-column>\n            <el-table-column\n              prop=\"time\"\n              label=\"日期\"\n              sortable\n              width=\"200\"\n              show-overflow-tooltip>\n            </el-table-column>\n            <el-table-column label=\"操作\"  align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-button  size=\"large\" @click=\"subYn(scope.row.id)\" type=\"danger\">取消收藏</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          <div style=\"margin-top: 20px\">\n            <el-button @click=\"toggleSelection()\" >取消选择</el-button>\n            <el-button @click=\"subYnAll()\" type=\"danger\">取消收藏</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n</template>\n<script>\n  import headerDom from \"@/components/header\";\n  import {mapState} from \"vuex\"\n    export default {\n        name: \"index\",\n      inject:[\"reload\"],\n      data(){\n          return{\n            subInfo:{},//用户收藏信息\n            loveMusicListDetail:[],//收藏列表\n            loading:true,//加载等待\n            multipleSelection: []\n          }\n      },\n      components:{\n        headerDom,\n      },\n      methods:{\n          getUserDel(){\n            this.$axios.get(\"userSub\").then(res=>{\n              console.log(res);\n              if (res.code===200){\n                this.subInfo=res\n              }\n            })\n          },\n        //取消全选\n        toggleSelection(rows) {\n          if (rows) {\n            rows.forEach(row => {\n              this.$refs.multipleTable.toggleRowSelection(row);\n            });\n          } else {\n            this.$refs.multipleTable.clearSelection();\n          }\n        },\n        handleSelectionChange(val) {\n          this.multipleSelection = val;\n          console.log(this.multipleSelection);\n        },\n        //获取收藏的歌单\n        getMusicList(){\n          let that = this\n          var userId = localStorage.getItem(\"userId\")\n          that.$axios.get(\"myMusiclist\",{uid:userId}).then(result=>{\n            console.log(result);\n            that.loveMusicListDetail = result.playlist   //0 是我喜欢，其他是别的歌单\n            for (var i=0;i<that.loveMusicListDetail.length;i++){\n              that.loveMusicListDetail[i].time =  new Date((that.loveMusicListDetail[i].createTime)).toLocaleString().replace(/:\\d{1,2}$/, ' ')\n            }\n          }).catch(error=>{\n            console.log(error);\n          })\n        },\n        //收藏取消\n        subYn(id){\n          let uid =id\n          this.$axios.get(\"subEdie\",{id:uid,t:2}).then(res=>{\n            console.log(res);\n            if (res.code===200){\n              this.$message({\n                message: \"取消收藏成功\",\n                type: 'success'\n              },1000);\n              this.getMusicList()\n              this.reload()\n              console.log(1);\n            }\n          })\n        },\n        //多选取消收藏\n        subYnAll(){\n          let flag=true;\n          let ul=[];\n          for (let i= 0;i<=this.multipleSelection.length;i++){\n            let mid=this.multipleSelection[i]\n            ul.push(\"mid\")\n          }\n          this.$confirm('是否取消收藏', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(()=>{\n            for (let j=0;j<=ul.length;j++){\n              this.$axios.get(\"subEdie\",{id:ul[j],t:2}).then(res=>{\n                console.log(res);\n                if (res.code===200){\n                }else{\n                  flag=false\n                }\n              })\n            }\n            if (flag){\n              this.$message({\n                message: \"取消收藏成功\",\n                type: 'success'\n              },1000);\n              this.getMusicList()\n              this.reload()\n            }\n          }).catch(() => {\n            this.$message({\n              type: 'info',\n              message: '已取消'\n            });\n          });\n\n        }\n      },\n      computed:{\n        ...mapState([\"userInfo\"])\n      },\n      mounted(){\n          this.getUserDel()\n        this.getMusicList()\n      }\n\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n.wraper{\n  width: 980px;\n  margin: 0 auto;\n  background-color: #fff;\n  border: 1px solid #d3d3d3;\n  border-width: 0 1px;\n  .box{\n    padding: 40px;\n    .img{\n      border: 1px solid #eeee;\n      img{\n        width: 208px;\n        height: 208px;\n      }\n    }\n    .centent{\n      margin-left:230px ;\n      .title{\n        font-size: 18px;\n        text-align: center;\n        font-weight: 500;\n      }\n      .detile{\n        margin-top: 15px;\n        h1{\n          font-size: 16px;\n        }\n        p{\n          margin-top: 10px;\n          font-size: 14px;\n          span{\n            color: red;\n          }\n        }\n      }\n    }\n    }\n\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/preson/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('headerDom'),_vm._v(\" \"),_c('div',{staticClass:\"wraper\"},[_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"img fl\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatarUrl,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"centent clearfix\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"用户: \"),_c('span',[_vm._v(_vm._s(_vm.userInfo.nickname))]),_vm._v(\"您好\")]),_vm._v(\" \"),_c('div',{staticClass:\"detile\"},[_c('h1',[_vm._v(\"截止目前的您的收藏结果如下：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"歌手共关注 \"),_c('span',[_vm._v(_vm._s(_vm.subInfo.artistCount))]),_vm._v(\"位\")]),_vm._v(\" \"),_c('p',[_vm._v(\"电台共订阅 \"),_c('span',[_vm._v(_vm._s(_vm.subInfo.djRadioCount))]),_vm._v(\"个\")]),_vm._v(\" \"),_c('p',[_vm._v(\"歌单共收藏 \"),_c('span',[_vm._v(_vm._s(_vm.subInfo.subPlaylistCount))]),_vm._v(\"个\")]),_vm._v(\" \"),_c('p',[_vm._v(\"MV共收藏 \"),_c('span',[_vm._v(_vm._s(_vm.subInfo.mvCount))]),_vm._v(\"部\")])])]),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.loveMusicListDetail,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"歌单名称\",\"width\":\"250\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"日期\",\"sortable\":\"\",\"width\":\"200\",\"show-overflow-tooltip\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"large\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.subYn(scope.row.id)}}},[_vm._v(\"取消收藏\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-button',{on:{\"click\":function($event){return _vm.toggleSelection()}}},[_vm._v(\"取消选择\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.subYnAll()}}},[_vm._v(\"取消收藏\")])],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-19eba228\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/preson/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-19eba228\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-19eba228\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-19eba228\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/preson/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}