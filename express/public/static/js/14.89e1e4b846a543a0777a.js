webpackJsonp([14],{"7wxu":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),s=n.n(i),o=n("Cz8s"),l=n("NYxO"),a={name:"index",inject:["reload"],data:function(){return{subInfo:{},loveMusicListDetail:[],loading:!0,multipleSelection:[]}},components:{headerDom:o.a},methods:{getUserDel:function(){var t=this;this.$axios.get("userSub").then(function(e){console.log(e),200===e.code&&(t.subInfo=e)})},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},getMusicList:function(){var t=this,e=localStorage.getItem("userId");t.$axios.get("myMusiclist",{uid:e}).then(function(e){console.log(e),t.loveMusicListDetail=e.playlist;for(var n=0;n<t.loveMusicListDetail.length;n++)t.loveMusicListDetail[n].time=new Date(t.loveMusicListDetail[n].createTime).toLocaleString().replace(/:\d{1,2}$/," ")}).catch(function(t){console.log(t)})},subYn:function(t){var e=this,n=t;this.$axios.get("subEdie",{id:n,t:2}).then(function(t){console.log(t),200===t.code&&(e.$message({message:"取消收藏成功",type:"success"},1e3),e.getMusicList(),e.reload(),console.log(1))})},subYnAll:function(){for(var t=this,e=!0,n=[],i=0;i<=this.multipleSelection.length;i++){this.multipleSelection[i];n.push("mid")}this.$confirm("是否取消收藏","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var i=0;i<=n.length;i++)t.$axios.get("subEdie",{id:n[i],t:2}).then(function(t){console.log(t),200===t.code||(e=!1)});e&&(t.$message({message:"取消收藏成功",type:"success"},1e3),t.getMusicList(),t.reload())}).catch(function(){t.$message({type:"info",message:"已取消"})})}},computed:s()({},Object(l.b)(["userInfo"])),mounted:function(){this.getUserDel(),this.getMusicList()}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("headerDom"),t._v(" "),n("div",{staticClass:"wraper"},[n("div",{staticClass:"box"},[n("div",{staticClass:"img fl"},[n("img",{attrs:{src:t.userInfo.avatarUrl,alt:""}})]),t._v(" "),n("div",{staticClass:"centent clearfix"},[n("p",{staticClass:"title"},[t._v("用户: "),n("span",[t._v(t._s(t.userInfo.nickname))]),t._v("您好")]),t._v(" "),n("div",{staticClass:"detile"},[n("h1",[t._v("截止目前的您的收藏结果如下：")]),t._v(" "),n("p",[t._v("歌手共关注 "),n("span",[t._v(t._s(t.subInfo.artistCount))]),t._v("位")]),t._v(" "),n("p",[t._v("电台共订阅 "),n("span",[t._v(t._s(t.subInfo.djRadioCount))]),t._v("个")]),t._v(" "),n("p",[t._v("歌单共收藏 "),n("span",[t._v(t._s(t.subInfo.subPlaylistCount))]),t._v("个")]),t._v(" "),n("p",[t._v("MV共收藏 "),n("span",[t._v(t._s(t.subInfo.mvCount))]),t._v("部")])])]),t._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.loveMusicListDetail,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"歌单名称",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{prop:"time",label:"日期",sortable:"",width:"200","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"large",type:"danger"},on:{click:function(n){return t.subYn(e.row.id)}}},[t._v("取消收藏")])]}}])})],1),t._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{on:{click:function(e){return t.toggleSelection()}}},[t._v("取消选择")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.subYnAll()}}},[t._v("取消收藏")])],1)],1)])],1)},staticRenderFns:[]};var u=n("VU/8")(a,c,!1,function(t){n("RHGC")},"data-v-19eba228",null);e.default=u.exports},RHGC:function(t,e){}});
//# sourceMappingURL=14.89e1e4b846a543a0777a.js.map